{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SACMC,EAAc,qBACdC,EAAWC,SAASC,cAAc,QAExCF,EAASG,iBAAiB,SAK1B,SAAqBC,GACnBC,EAAkBD,EAAIE,OAAOC,MAAQH,EAAIE,OAAOE,MAChDC,aAAaC,QAAQX,EAAaY,KAAKC,UAAUP,G,IANnDL,EAASG,iBAAiB,UAS1B,SAAsBC,GAEpB,GADAA,EAAIS,kBAEDR,EAAkBS,QAClBT,EAAkBU,OAClBV,EAAkBW,OAEnB,OAEF,IAAIC,EAAYC,OAAOb,EAAkBS,OACnCK,EAAWD,OAAOb,EAAkBU,MACpCK,EAAaF,OAAOb,EAAkBW,QAE5CK,QAAQC,IAAIb,aAAac,QAAQxB,IACjCK,EAAIE,OAAOkB,QACXf,aAAagB,WAAW1B,GAExB,IAAK,IAAIiB,EAAS,EAAGA,EAASI,EAAYJ,IACxCU,EAAcV,EAAS,EAAIC,GAAaE,GACrCQ,MAAK,SAAAC,G,IAAGC,EAAQD,EAARC,SAAUf,EAAKc,EAALd,MACjBgB,EAAAjC,GAASkC,OAAOC,QACd,uBAAwCC,OAAfJ,EAAS,QAAYI,OAANnB,EAAM,M,IAGjDoB,OAAM,SAAAN,G,IAAGC,EAAQD,EAARC,SAAUf,EAAKc,EAALd,MAClBgB,EAAAjC,GAASkC,OAAOI,QACd,sBAAqCF,OAAfJ,EAAS,QAAYI,OAANnB,EAAM,M,IAInD,SAASY,EAAcG,EAAUf,GAY/B,OAXgB,IAAIsB,SAAQ,SAACC,EAASC,GACpC,IAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,WACLH,EACFF,EAAQ,CAAER,WAAUf,UAEpBwB,EAAO,CAAET,WAAUf,S,GAEnBA,GAASK,E,QA9CnB,IAAMd,EAAoBM,KAAKgC,MAAMlC,aAAac,QAAQxB,KAAiB,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nconst STORAGE_KEY = 'promise-form-state';\nconst formData = document.querySelector('form');\n\nformData.addEventListener('input', onFormInput);\nformData.addEventListener('submit', onFormSubmit);\n\nconst formDataInStorage = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n\nfunction onFormInput(evt) {\n  formDataInStorage[evt.target.name] = evt.target.value;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formDataInStorage));\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  if (\n    !formDataInStorage.delay ||\n    !formDataInStorage.step ||\n    !formDataInStorage.amount\n  ) {\n    return;\n  }\n  let delayData = Number(formDataInStorage.delay);\n  const stepData = Number(formDataInStorage.step);\n  const amountData = Number(formDataInStorage.amount);\n\n  console.log(localStorage.getItem(STORAGE_KEY));\n  evt.target.reset();\n  localStorage.removeItem(STORAGE_KEY);\n\n  for (let amount = 0; amount < amountData; amount++)\n    createPromise(amount + 1, (delayData += stepData))\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(\n          `✅ Fulfilled promise ${position} in ${delay}ms`\n        );\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(\n          `❌ Rejected promise ${position} in ${delay}ms`\n        );\n      });\n\n  function createPromise(position, delay) {\n    const promise = new Promise((resolve, reject) => {\n      const shouldResolve = Math.random() > 0.3;\n      setTimeout(() => {\n        if (shouldResolve) {\n          resolve({ position, delay });\n        } else {\n          reject({ position, delay });\n        }\n      }, (delay -= stepData));\n    });\n\n    return promise;\n  }\n}\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$STORAGE_KEY","$ce04d3a99e08e73b$var$formData","document","querySelector","addEventListener","evt","$ce04d3a99e08e73b$var$formDataInStorage","target","name","value","localStorage","setItem","JSON","stringify","preventDefault","delay","step","amount","delayData","Number","stepData","amountData","console","log","getItem","reset","removeItem","createPromise","then","param","position","$parcel$interopDefault","Notify","success","concat","catch","failure","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","parse"],"version":3,"file":"03-promises.6093db3c.js.map"}